{"timestamp": "2025-12-09T03:43:13.098721", "level": "WARNING", "logger": "agri_ai", "message": "\u26a0\ufe0f Redis unavailable - caching disabled (fallback mode): Error 11001 connecting to redis:6379. getaddrinfo failed.", "module": "logging_config", "function": "warning", "line": 119, "endpoint": "cache"}
{"timestamp": "2025-12-09T03:43:22.224005", "level": "INFO", "logger": "agri_ai", "message": "\ud83d\ude80 Starting Agriculture AI Platform with Autonomous Agent...", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T03:43:22.724921", "level": "INFO", "logger": "agri_ai", "message": "Database tables created successfully", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T03:43:22.735604", "level": "INFO", "logger": "agri_ai", "message": "\u2705 Database initialized successfully", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T03:43:22.757825", "level": "INFO", "logger": "agri_ai", "message": "\u2705 Autonomous monitoring active! Agent running 24/7", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T03:46:16.567831", "level": "INFO", "logger": "agri_ai", "message": "GET /api/auth/google/login - 302", "module": "logging_config", "function": "info", "line": 114, "request_id": "47869512-e01c-41a6-8945-46538491459f", "endpoint": "/api/auth/google/login"}
{"timestamp": "2025-12-09T03:46:25.141507", "level": "ERROR", "logger": "agri_ai", "message": "Google OAuth callback error: mismatching_state: CSRF Warning! State not equal in request and response.", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "MismatchingStateError", "message": "mismatching_state: CSRF Warning! State not equal in request and response.", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 316, in google_callback\n    token = await oauth.google.authorize_access_token(request)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\authlib\\integrations\\starlette_client\\apps.py\", line 90, in authorize_access_token\n    params = self._format_state_params(state_data, params)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\authlib\\integrations\\base_client\\sync_app.py\", line 260, in _format_state_params\n    raise MismatchingStateError()\n", "authlib.integrations.base_client.errors.MismatchingStateError: mismatching_state: CSRF Warning! State not equal in request and response.\n"]}}
{"timestamp": "2025-12-09T03:46:25.148579", "level": "ERROR", "logger": "agri_ai", "message": "Traceback (most recent call last):\n  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 316, in google_callback\n    token = await oauth.google.authorize_access_token(request)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\authlib\\integrations\\starlette_client\\apps.py\", line 90, in authorize_access_token\n    params = self._format_state_params(state_data, params)\n  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\authlib\\integrations\\base_client\\sync_app.py\", line 260, in _format_state_params\n    raise MismatchingStateError()\nauthlib.integrations.base_client.errors.MismatchingStateError: mismatching_state: CSRF Warning! State not equal in request and response.\n", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "MismatchingStateError", "message": "mismatching_state: CSRF Warning! State not equal in request and response.", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 316, in google_callback\n    token = await oauth.google.authorize_access_token(request)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\authlib\\integrations\\starlette_client\\apps.py\", line 90, in authorize_access_token\n    params = self._format_state_params(state_data, params)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\authlib\\integrations\\base_client\\sync_app.py\", line 260, in _format_state_params\n    raise MismatchingStateError()\n", "authlib.integrations.base_client.errors.MismatchingStateError: mismatching_state: CSRF Warning! State not equal in request and response.\n"]}}
{"timestamp": "2025-12-09T03:46:25.153154", "level": "INFO", "logger": "agri_ai", "message": "GET /api/auth/google/callback - 307", "module": "logging_config", "function": "info", "line": 114, "request_id": "b30a0afe-51be-4d78-beff-73dda2620052", "endpoint": "/api/auth/google/callback"}
{"timestamp": "2025-12-09T03:46:29.963345", "level": "INFO", "logger": "agri_ai", "message": "GET /api/auth/google/login - 302", "module": "logging_config", "function": "info", "line": 114, "request_id": "893270a7-19b2-4ff1-9972-3a7d9b060331", "endpoint": "/api/auth/google/login"}
{"timestamp": "2025-12-09T03:46:30.241206", "level": "ERROR", "logger": "agri_ai", "message": "Google OAuth callback error: mismatching_state: CSRF Warning! State not equal in request and response.", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "MismatchingStateError", "message": "mismatching_state: CSRF Warning! State not equal in request and response.", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 316, in google_callback\n    token = await oauth.google.authorize_access_token(request)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\authlib\\integrations\\starlette_client\\apps.py\", line 90, in authorize_access_token\n    params = self._format_state_params(state_data, params)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\authlib\\integrations\\base_client\\sync_app.py\", line 260, in _format_state_params\n    raise MismatchingStateError()\n", "authlib.integrations.base_client.errors.MismatchingStateError: mismatching_state: CSRF Warning! State not equal in request and response.\n"]}}
{"timestamp": "2025-12-09T03:46:30.253419", "level": "ERROR", "logger": "agri_ai", "message": "Traceback (most recent call last):\n  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 316, in google_callback\n    token = await oauth.google.authorize_access_token(request)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\authlib\\integrations\\starlette_client\\apps.py\", line 90, in authorize_access_token\n    params = self._format_state_params(state_data, params)\n  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\authlib\\integrations\\base_client\\sync_app.py\", line 260, in _format_state_params\n    raise MismatchingStateError()\nauthlib.integrations.base_client.errors.MismatchingStateError: mismatching_state: CSRF Warning! State not equal in request and response.\n", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "MismatchingStateError", "message": "mismatching_state: CSRF Warning! State not equal in request and response.", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 316, in google_callback\n    token = await oauth.google.authorize_access_token(request)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\authlib\\integrations\\starlette_client\\apps.py\", line 90, in authorize_access_token\n    params = self._format_state_params(state_data, params)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\authlib\\integrations\\base_client\\sync_app.py\", line 260, in _format_state_params\n    raise MismatchingStateError()\n", "authlib.integrations.base_client.errors.MismatchingStateError: mismatching_state: CSRF Warning! State not equal in request and response.\n"]}}
{"timestamp": "2025-12-09T03:46:30.257197", "level": "INFO", "logger": "agri_ai", "message": "GET /api/auth/google/callback - 307", "module": "logging_config", "function": "info", "line": 114, "request_id": "abdc6063-2ee5-4c05-bc41-5c47757229a3", "endpoint": "/api/auth/google/callback"}
{"timestamp": "2025-12-09T04:43:05.019602", "level": "INFO", "logger": "agri_ai", "message": "Fetching weather from API for Delhi", "module": "logging_config", "function": "info", "line": 114, "endpoint": "weather"}
{"timestamp": "2025-12-09T04:43:06.167147", "level": "INFO", "logger": "agri_ai", "message": "GET /api/weather/current - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "dfc71a1a-b31e-4662-a39e-6f720a218ac5", "endpoint": "/api/weather/current"}
{"timestamp": "2025-12-09T04:43:06.678269", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "93a7c247-13c3-4418-be35-8a6289120d51", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:43:06.718801", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "5e30a629-cefc-4170-a56d-5de0829493dc", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:43:06.798394", "level": "INFO", "logger": "agri_ai", "message": "GET /api/agent/history - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "e79bbd82-1eca-4dc0-8241-a4f0e879f606", "endpoint": "/api/agent/history"}
{"timestamp": "2025-12-09T04:43:06.816991", "level": "INFO", "logger": "agri_ai", "message": "Predicting prices for wheat (7 days ahead)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:43:07.193518", "level": "INFO", "logger": "agri_ai", "message": "Attempting to fetch data from data.gov.in API (commodity=Wheat, limit=5000, offset=0)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:43:08.074351", "level": "WARNING", "logger": "agri_ai", "message": "\u26a0\ufe0f API returned empty data", "module": "logging_config", "function": "warning", "line": 119}
{"timestamp": "2025-12-09T04:43:08.098982", "level": "WARNING", "logger": "agri_ai", "message": "\u26a0\ufe0f Falling back to synthetic data", "module": "logging_config", "function": "warning", "line": 119}
{"timestamp": "2025-12-09T04:43:08.109548", "level": "INFO", "logger": "agri_ai", "message": "\ud83d\udcca Generating synthetic data for wheat (180 days)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:43:08.282715", "level": "INFO", "logger": "agri_ai", "message": "GET /api/prices/predict - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "c30266b5-9279-4728-a2d0-203cf2eba10a", "endpoint": "/api/prices/predict"}
