{"timestamp": "2025-12-09T03:43:13.098721", "level": "WARNING", "logger": "agri_ai", "message": "\u26a0\ufe0f Redis unavailable - caching disabled (fallback mode): Error 11001 connecting to redis:6379. getaddrinfo failed.", "module": "logging_config", "function": "warning", "line": 119, "endpoint": "cache"}
{"timestamp": "2025-12-09T03:43:22.224005", "level": "INFO", "logger": "agri_ai", "message": "\ud83d\ude80 Starting Agriculture AI Platform with Autonomous Agent...", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T03:43:22.724921", "level": "INFO", "logger": "agri_ai", "message": "Database tables created successfully", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T03:43:22.735604", "level": "INFO", "logger": "agri_ai", "message": "\u2705 Database initialized successfully", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T03:43:22.757825", "level": "INFO", "logger": "agri_ai", "message": "\u2705 Autonomous monitoring active! Agent running 24/7", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T03:46:16.567831", "level": "INFO", "logger": "agri_ai", "message": "GET /api/auth/google/login - 302", "module": "logging_config", "function": "info", "line": 114, "request_id": "47869512-e01c-41a6-8945-46538491459f", "endpoint": "/api/auth/google/login"}
{"timestamp": "2025-12-09T03:46:25.141507", "level": "ERROR", "logger": "agri_ai", "message": "Google OAuth callback error: mismatching_state: CSRF Warning! State not equal in request and response.", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "MismatchingStateError", "message": "mismatching_state: CSRF Warning! State not equal in request and response.", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 316, in google_callback\n    token = await oauth.google.authorize_access_token(request)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\authlib\\integrations\\starlette_client\\apps.py\", line 90, in authorize_access_token\n    params = self._format_state_params(state_data, params)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\authlib\\integrations\\base_client\\sync_app.py\", line 260, in _format_state_params\n    raise MismatchingStateError()\n", "authlib.integrations.base_client.errors.MismatchingStateError: mismatching_state: CSRF Warning! State not equal in request and response.\n"]}}
{"timestamp": "2025-12-09T03:46:25.148579", "level": "ERROR", "logger": "agri_ai", "message": "Traceback (most recent call last):\n  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 316, in google_callback\n    token = await oauth.google.authorize_access_token(request)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\authlib\\integrations\\starlette_client\\apps.py\", line 90, in authorize_access_token\n    params = self._format_state_params(state_data, params)\n  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\authlib\\integrations\\base_client\\sync_app.py\", line 260, in _format_state_params\n    raise MismatchingStateError()\nauthlib.integrations.base_client.errors.MismatchingStateError: mismatching_state: CSRF Warning! State not equal in request and response.\n", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "MismatchingStateError", "message": "mismatching_state: CSRF Warning! State not equal in request and response.", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 316, in google_callback\n    token = await oauth.google.authorize_access_token(request)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\authlib\\integrations\\starlette_client\\apps.py\", line 90, in authorize_access_token\n    params = self._format_state_params(state_data, params)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\authlib\\integrations\\base_client\\sync_app.py\", line 260, in _format_state_params\n    raise MismatchingStateError()\n", "authlib.integrations.base_client.errors.MismatchingStateError: mismatching_state: CSRF Warning! State not equal in request and response.\n"]}}
{"timestamp": "2025-12-09T03:46:25.153154", "level": "INFO", "logger": "agri_ai", "message": "GET /api/auth/google/callback - 307", "module": "logging_config", "function": "info", "line": 114, "request_id": "b30a0afe-51be-4d78-beff-73dda2620052", "endpoint": "/api/auth/google/callback"}
{"timestamp": "2025-12-09T03:46:29.963345", "level": "INFO", "logger": "agri_ai", "message": "GET /api/auth/google/login - 302", "module": "logging_config", "function": "info", "line": 114, "request_id": "893270a7-19b2-4ff1-9972-3a7d9b060331", "endpoint": "/api/auth/google/login"}
{"timestamp": "2025-12-09T03:46:30.241206", "level": "ERROR", "logger": "agri_ai", "message": "Google OAuth callback error: mismatching_state: CSRF Warning! State not equal in request and response.", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "MismatchingStateError", "message": "mismatching_state: CSRF Warning! State not equal in request and response.", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 316, in google_callback\n    token = await oauth.google.authorize_access_token(request)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\authlib\\integrations\\starlette_client\\apps.py\", line 90, in authorize_access_token\n    params = self._format_state_params(state_data, params)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\authlib\\integrations\\base_client\\sync_app.py\", line 260, in _format_state_params\n    raise MismatchingStateError()\n", "authlib.integrations.base_client.errors.MismatchingStateError: mismatching_state: CSRF Warning! State not equal in request and response.\n"]}}
{"timestamp": "2025-12-09T03:46:30.253419", "level": "ERROR", "logger": "agri_ai", "message": "Traceback (most recent call last):\n  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 316, in google_callback\n    token = await oauth.google.authorize_access_token(request)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\authlib\\integrations\\starlette_client\\apps.py\", line 90, in authorize_access_token\n    params = self._format_state_params(state_data, params)\n  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\authlib\\integrations\\base_client\\sync_app.py\", line 260, in _format_state_params\n    raise MismatchingStateError()\nauthlib.integrations.base_client.errors.MismatchingStateError: mismatching_state: CSRF Warning! State not equal in request and response.\n", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "MismatchingStateError", "message": "mismatching_state: CSRF Warning! State not equal in request and response.", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 316, in google_callback\n    token = await oauth.google.authorize_access_token(request)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\authlib\\integrations\\starlette_client\\apps.py\", line 90, in authorize_access_token\n    params = self._format_state_params(state_data, params)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\authlib\\integrations\\base_client\\sync_app.py\", line 260, in _format_state_params\n    raise MismatchingStateError()\n", "authlib.integrations.base_client.errors.MismatchingStateError: mismatching_state: CSRF Warning! State not equal in request and response.\n"]}}
{"timestamp": "2025-12-09T03:46:30.257197", "level": "INFO", "logger": "agri_ai", "message": "GET /api/auth/google/callback - 307", "module": "logging_config", "function": "info", "line": 114, "request_id": "abdc6063-2ee5-4c05-bc41-5c47757229a3", "endpoint": "/api/auth/google/callback"}
{"timestamp": "2025-12-09T04:43:05.019602", "level": "INFO", "logger": "agri_ai", "message": "Fetching weather from API for Delhi", "module": "logging_config", "function": "info", "line": 114, "endpoint": "weather"}
{"timestamp": "2025-12-09T04:43:06.167147", "level": "INFO", "logger": "agri_ai", "message": "GET /api/weather/current - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "dfc71a1a-b31e-4662-a39e-6f720a218ac5", "endpoint": "/api/weather/current"}
{"timestamp": "2025-12-09T04:43:06.678269", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "93a7c247-13c3-4418-be35-8a6289120d51", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:43:06.718801", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "5e30a629-cefc-4170-a56d-5de0829493dc", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:43:06.798394", "level": "INFO", "logger": "agri_ai", "message": "GET /api/agent/history - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "e79bbd82-1eca-4dc0-8241-a4f0e879f606", "endpoint": "/api/agent/history"}
{"timestamp": "2025-12-09T04:43:06.816991", "level": "INFO", "logger": "agri_ai", "message": "Predicting prices for wheat (7 days ahead)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:43:07.193518", "level": "INFO", "logger": "agri_ai", "message": "Attempting to fetch data from data.gov.in API (commodity=Wheat, limit=5000, offset=0)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:43:08.074351", "level": "WARNING", "logger": "agri_ai", "message": "\u26a0\ufe0f API returned empty data", "module": "logging_config", "function": "warning", "line": 119}
{"timestamp": "2025-12-09T04:43:08.098982", "level": "WARNING", "logger": "agri_ai", "message": "\u26a0\ufe0f Falling back to synthetic data", "module": "logging_config", "function": "warning", "line": 119}
{"timestamp": "2025-12-09T04:43:08.109548", "level": "INFO", "logger": "agri_ai", "message": "\ud83d\udcca Generating synthetic data for wheat (180 days)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:43:08.282715", "level": "INFO", "logger": "agri_ai", "message": "GET /api/prices/predict - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "c30266b5-9279-4728-a2d0-203cf2eba10a", "endpoint": "/api/prices/predict"}
{"timestamp": "2025-12-09T04:53:50.065594", "level": "WARNING", "logger": "agri_ai", "message": "\u26a0\ufe0f Redis unavailable - caching disabled (fallback mode): Error 11001 connecting to redis:6379. getaddrinfo failed.", "module": "logging_config", "function": "warning", "line": 119, "endpoint": "cache"}
{"timestamp": "2025-12-09T04:53:59.065587", "level": "INFO", "logger": "agri_ai", "message": "\ud83d\ude80 Starting Agriculture AI Platform with Autonomous Agent...", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:53:59.371866", "level": "INFO", "logger": "agri_ai", "message": "Database tables created successfully", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:53:59.379801", "level": "INFO", "logger": "agri_ai", "message": "\u2705 Database initialized successfully", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:53:59.393548", "level": "INFO", "logger": "agri_ai", "message": "\u2705 Autonomous monitoring active! Agent running 24/7", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:54:12.934419", "level": "INFO", "logger": "agri_ai", "message": "Fetching weather from API for Delhi", "module": "logging_config", "function": "info", "line": 114, "endpoint": "weather"}
{"timestamp": "2025-12-09T04:54:13.545952", "level": "INFO", "logger": "agri_ai", "message": "GET /api/weather/current - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "62d95a32-6973-44fb-8658-5e575947d657", "endpoint": "/api/weather/current"}
{"timestamp": "2025-12-09T04:54:13.630753", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "b60bdbf9-5e31-4786-81c8-1f8b8d183d4e", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:54:13.663722", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "8468c26c-3096-4734-b2aa-db2389aeddbf", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:54:13.694842", "level": "INFO", "logger": "agri_ai", "message": "GET /api/agent/history - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "773938c0-3593-4ece-b145-7346bb167a5c", "endpoint": "/api/agent/history"}
{"timestamp": "2025-12-09T04:54:13.702988", "level": "INFO", "logger": "agri_ai", "message": "Predicting prices for wheat (7 days ahead)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:54:13.826207", "level": "INFO", "logger": "agri_ai", "message": "Attempting to fetch data from data.gov.in API (commodity=Wheat, limit=5000, offset=0)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:54:14.572795", "level": "WARNING", "logger": "agri_ai", "message": "\u26a0\ufe0f API returned empty data", "module": "logging_config", "function": "warning", "line": 119}
{"timestamp": "2025-12-09T04:54:14.581493", "level": "WARNING", "logger": "agri_ai", "message": "\u26a0\ufe0f Falling back to synthetic data", "module": "logging_config", "function": "warning", "line": 119}
{"timestamp": "2025-12-09T04:54:14.589907", "level": "INFO", "logger": "agri_ai", "message": "\ud83d\udcca Generating synthetic data for wheat (180 days)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:54:14.626888", "level": "INFO", "logger": "agri_ai", "message": "GET /api/prices/predict - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "0479b12e-7678-48b8-9c89-005697c06546", "endpoint": "/api/prices/predict"}
{"timestamp": "2025-12-09T04:54:17.015360", "level": "INFO", "logger": "agri_ai", "message": "Fetching weather from API for Delhi", "module": "logging_config", "function": "info", "line": 114, "endpoint": "weather"}
{"timestamp": "2025-12-09T04:54:17.684623", "level": "INFO", "logger": "agri_ai", "message": "GET /api/weather/current - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "1591be00-6a18-4a96-89ac-e6e763f1d905", "endpoint": "/api/weather/current"}
{"timestamp": "2025-12-09T04:54:17.706241", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "c3f33b26-a90e-429d-9d32-d964f8790e7a", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:54:17.746502", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "87b78074-1f8c-4ce7-87d4-b4eeccc12487", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:54:17.761112", "level": "INFO", "logger": "agri_ai", "message": "GET /api/agent/history - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "b354dc70-bd22-4ff0-a58d-32945e897522", "endpoint": "/api/agent/history"}
{"timestamp": "2025-12-09T04:54:17.769681", "level": "INFO", "logger": "agri_ai", "message": "Predicting prices for wheat (7 days ahead)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:54:17.856722", "level": "INFO", "logger": "agri_ai", "message": "Attempting to fetch data from data.gov.in API (commodity=Wheat, limit=5000, offset=0)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:54:18.704220", "level": "WARNING", "logger": "agri_ai", "message": "\u26a0\ufe0f API returned empty data", "module": "logging_config", "function": "warning", "line": 119}
{"timestamp": "2025-12-09T04:54:18.712697", "level": "WARNING", "logger": "agri_ai", "message": "\u26a0\ufe0f Falling back to synthetic data", "module": "logging_config", "function": "warning", "line": 119}
{"timestamp": "2025-12-09T04:54:18.719377", "level": "INFO", "logger": "agri_ai", "message": "\ud83d\udcca Generating synthetic data for wheat (180 days)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:54:18.726846", "level": "INFO", "logger": "agri_ai", "message": "GET /api/prices/predict - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "547e514a-8b48-4830-b7a7-dc57f36fb203", "endpoint": "/api/prices/predict"}
{"timestamp": "2025-12-09T04:54:47.134680", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "5f69b718-23b1-4163-98ce-fa3abd20bdb7", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:55:17.148686", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "0210bbc7-4cd0-4193-8dfb-e7096b4855e0", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:55:47.142871", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "c7bc6501-efe6-486f-81ea-e151b68dfef4", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:55:58.351078", "level": "INFO", "logger": "agri_ai", "message": "Fetching weather from API for Delhi", "module": "logging_config", "function": "info", "line": 114, "endpoint": "weather"}
{"timestamp": "2025-12-09T04:55:59.396898", "level": "INFO", "logger": "agri_ai", "message": "GET /api/weather/current - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "50cbafd9-e8d3-48ab-a11c-56b29a94a741", "endpoint": "/api/weather/current"}
{"timestamp": "2025-12-09T04:55:59.425740", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "88c95129-1245-4150-8006-2583e2c2892f", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:55:59.483769", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "c9c44b8d-259d-4aae-89ba-84eb42db652b", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:55:59.614066", "level": "INFO", "logger": "agri_ai", "message": "GET /api/agent/history - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "dc4c540c-48d2-4580-859a-6d3f74723f09", "endpoint": "/api/agent/history"}
{"timestamp": "2025-12-09T04:55:59.634822", "level": "INFO", "logger": "agri_ai", "message": "Predicting prices for wheat (7 days ahead)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:56:03.235953", "level": "INFO", "logger": "agri_ai", "message": "Attempting to fetch data from data.gov.in API (commodity=Wheat, limit=5000, offset=0)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:56:04.239836", "level": "WARNING", "logger": "agri_ai", "message": "\u26a0\ufe0f API returned empty data", "module": "logging_config", "function": "warning", "line": 119}
{"timestamp": "2025-12-09T04:56:04.253996", "level": "WARNING", "logger": "agri_ai", "message": "\u26a0\ufe0f Falling back to synthetic data", "module": "logging_config", "function": "warning", "line": 119}
{"timestamp": "2025-12-09T04:56:04.262104", "level": "INFO", "logger": "agri_ai", "message": "\ud83d\udcca Generating synthetic data for wheat (180 days)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:56:04.338576", "level": "INFO", "logger": "agri_ai", "message": "GET /api/prices/predict - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "f2f21c02-dc19-46b4-8718-65e62f0bbf37", "endpoint": "/api/prices/predict"}
{"timestamp": "2025-12-09T04:56:05.719947", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "3347bf96-4d9f-4c41-b4bc-94efd4fa658f", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:56:05.729766", "level": "INFO", "logger": "agri_ai", "message": "Fetching weather from API for Delhi", "module": "logging_config", "function": "info", "line": 114, "endpoint": "weather"}
{"timestamp": "2025-12-09T04:56:06.642801", "level": "INFO", "logger": "agri_ai", "message": "GET /api/weather/current - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "4d51e1bd-8668-4d29-8001-747b37ef3e2b", "endpoint": "/api/weather/current"}
{"timestamp": "2025-12-09T04:56:06.653061", "level": "INFO", "logger": "agri_ai", "message": "Fetching weather from API for Delhi", "module": "logging_config", "function": "info", "line": 114, "endpoint": "weather"}
{"timestamp": "2025-12-09T04:56:07.446172", "level": "INFO", "logger": "agri_ai", "message": "Fetching weather from API for Delhi", "module": "logging_config", "function": "info", "line": 114, "endpoint": "weather"}
{"timestamp": "2025-12-09T04:56:08.013143", "level": "INFO", "logger": "agri_ai", "message": "Fetching weather from API for Delhi", "module": "logging_config", "function": "info", "line": 114, "endpoint": "weather"}
{"timestamp": "2025-12-09T04:56:08.936833", "level": "INFO", "logger": "agri_ai", "message": "Fetching weather from API for Delhi", "module": "logging_config", "function": "info", "line": 114, "endpoint": "weather"}
{"timestamp": "2025-12-09T04:56:09.514995", "level": "INFO", "logger": "agri_ai", "message": "GET /api/weather/current - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "f02be88e-5a8a-4c71-b9d0-f659773ab9b4", "endpoint": "/api/weather/current"}
{"timestamp": "2025-12-09T04:56:09.517388", "level": "INFO", "logger": "agri_ai", "message": "GET /api/weather/current - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "1585e295-33b0-4276-9ad0-2c993ef180aa", "endpoint": "/api/weather/current"}
{"timestamp": "2025-12-09T04:56:09.517878", "level": "INFO", "logger": "agri_ai", "message": "GET /api/weather/current - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "98e3f74e-5a47-4b1e-9fa3-f601209c893f", "endpoint": "/api/weather/current"}
{"timestamp": "2025-12-09T04:56:09.518877", "level": "INFO", "logger": "agri_ai", "message": "GET /api/weather/current - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "a5c3539c-f003-414f-a377-5cdeb85d03ab", "endpoint": "/api/weather/current"}
{"timestamp": "2025-12-09T04:56:09.982334", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "f604f077-2ad0-45cd-83ff-dbdee957cc2a", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:56:10.013432", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "223b4b60-5f93-4777-b659-4f54e9615674", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:56:10.045775", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "b071b7fd-7e02-442d-9ce0-0ee9d1b18b78", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:56:10.076213", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "41565c64-3aa4-4db8-b0ae-baedf2e5714b", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:56:10.118832", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "14993189-3cf4-4a68-9a63-e128e4ec22c1", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:56:10.145184", "level": "INFO", "logger": "agri_ai", "message": "GET /api/agent/history - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "8f4e08af-c3d2-4d12-9dde-1d031710a408", "endpoint": "/api/agent/history"}
{"timestamp": "2025-12-09T04:56:10.152847", "level": "INFO", "logger": "agri_ai", "message": "Predicting prices for wheat (7 days ahead)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:56:10.260379", "level": "INFO", "logger": "agri_ai", "message": "Attempting to fetch data from data.gov.in API (commodity=Wheat, limit=5000, offset=0)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:56:12.078914", "level": "WARNING", "logger": "agri_ai", "message": "\u26a0\ufe0f API returned empty data", "module": "logging_config", "function": "warning", "line": 119}
{"timestamp": "2025-12-09T04:56:12.089417", "level": "WARNING", "logger": "agri_ai", "message": "\u26a0\ufe0f Falling back to synthetic data", "module": "logging_config", "function": "warning", "line": 119}
{"timestamp": "2025-12-09T04:56:12.099762", "level": "INFO", "logger": "agri_ai", "message": "\ud83d\udcca Generating synthetic data for wheat (180 days)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:56:12.111064", "level": "INFO", "logger": "agri_ai", "message": "GET /api/prices/predict - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "596e071d-69d9-4d1a-8f22-70d3b1fd00bc", "endpoint": "/api/prices/predict"}
{"timestamp": "2025-12-09T04:56:30.336984", "level": "INFO", "logger": "agri_ai", "message": "Fetching weather from API for Delhi", "module": "logging_config", "function": "info", "line": 114, "endpoint": "weather"}
{"timestamp": "2025-12-09T04:56:31.065719", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "43dc6141-1b4d-46a8-984b-a49f277fe4a4", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:56:31.073979", "level": "INFO", "logger": "agri_ai", "message": "GET /api/weather/current - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "7ca29fa1-128d-4de6-820e-50c1c869bdcf", "endpoint": "/api/weather/current"}
{"timestamp": "2025-12-09T04:56:31.103123", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "855c0215-de85-4040-a7c3-5ecb045f3a16", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:56:31.118879", "level": "INFO", "logger": "agri_ai", "message": "GET /api/agent/history - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "62bd3e65-7bce-48db-b3e5-3c99b647c9cc", "endpoint": "/api/agent/history"}
{"timestamp": "2025-12-09T04:56:31.127084", "level": "INFO", "logger": "agri_ai", "message": "Predicting prices for wheat (7 days ahead)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:56:31.227078", "level": "INFO", "logger": "agri_ai", "message": "Attempting to fetch data from data.gov.in API (commodity=Wheat, limit=5000, offset=0)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:56:32.119239", "level": "WARNING", "logger": "agri_ai", "message": "\u26a0\ufe0f API returned empty data", "module": "logging_config", "function": "warning", "line": 119}
{"timestamp": "2025-12-09T04:56:32.128967", "level": "WARNING", "logger": "agri_ai", "message": "\u26a0\ufe0f Falling back to synthetic data", "module": "logging_config", "function": "warning", "line": 119}
{"timestamp": "2025-12-09T04:56:32.136541", "level": "INFO", "logger": "agri_ai", "message": "\ud83d\udcca Generating synthetic data for wheat (180 days)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:56:32.143349", "level": "INFO", "logger": "agri_ai", "message": "GET /api/prices/predict - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "2c211979-c0e7-463c-9f55-fa553d37116c", "endpoint": "/api/prices/predict"}
{"timestamp": "2025-12-09T04:57:01.130831", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "11b0ad99-7c66-4992-870e-0b3ba5d3caae", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:57:31.175093", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "2bbbf255-eead-42bb-86a5-aad0eccc9903", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:58:01.149672", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "e6e705d5-3f8e-4363-a0eb-1f1fcce67b11", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:58:15.800661", "level": "INFO", "logger": "agri_ai", "message": "Fetching weather from API for Delhi", "module": "logging_config", "function": "info", "line": 114, "endpoint": "weather"}
{"timestamp": "2025-12-09T04:58:16.876221", "level": "INFO", "logger": "agri_ai", "message": "GET /api/weather/current - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "7c9d2328-4da6-4403-8a7f-b4d46f0a1e79", "endpoint": "/api/weather/current"}
{"timestamp": "2025-12-09T04:58:16.898658", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "999abf27-d865-4f1f-9c0c-83d3c54af086", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:58:16.944222", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "a8e10415-0cd0-43cf-8a4f-7e9ecd3e3249", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:58:17.070867", "level": "INFO", "logger": "agri_ai", "message": "GET /api/agent/history - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "25647bfe-b0e2-48da-b660-f68a1760e425", "endpoint": "/api/agent/history"}
{"timestamp": "2025-12-09T04:58:17.086775", "level": "INFO", "logger": "agri_ai", "message": "Predicting prices for wheat (7 days ahead)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:58:17.457521", "level": "INFO", "logger": "agri_ai", "message": "Attempting to fetch data from data.gov.in API (commodity=Wheat, limit=5000, offset=0)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:58:18.463176", "level": "WARNING", "logger": "agri_ai", "message": "\u26a0\ufe0f API returned empty data", "module": "logging_config", "function": "warning", "line": 119}
{"timestamp": "2025-12-09T04:58:18.473942", "level": "WARNING", "logger": "agri_ai", "message": "\u26a0\ufe0f Falling back to synthetic data", "module": "logging_config", "function": "warning", "line": 119}
{"timestamp": "2025-12-09T04:58:18.484938", "level": "INFO", "logger": "agri_ai", "message": "\ud83d\udcca Generating synthetic data for wheat (180 days)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:58:18.653830", "level": "INFO", "logger": "agri_ai", "message": "GET /api/prices/predict - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "98fc86af-deb2-4bb7-9dc9-94e2b6ee4d4f", "endpoint": "/api/prices/predict"}
{"timestamp": "2025-12-09T04:58:22.663354", "level": "INFO", "logger": "agri_ai", "message": "Fetching weather from API for Delhi", "module": "logging_config", "function": "info", "line": 114, "endpoint": "weather"}
{"timestamp": "2025-12-09T04:58:23.325215", "level": "INFO", "logger": "agri_ai", "message": "GET /api/weather/current - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "0d6f1a4f-bb07-45a6-9e46-ea20c1e017c3", "endpoint": "/api/weather/current"}
{"timestamp": "2025-12-09T04:58:23.349189", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "3dc37eca-86ee-4dd5-9cff-5a5b2dda1d1e", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:58:23.379789", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "9bc260b7-2657-4c85-9d69-337d3a9447a0", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:58:23.394114", "level": "INFO", "logger": "agri_ai", "message": "GET /api/agent/history - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "8a4a7d07-c987-4abf-90a6-f9070f57ac19", "endpoint": "/api/agent/history"}
{"timestamp": "2025-12-09T04:58:23.402402", "level": "INFO", "logger": "agri_ai", "message": "Predicting prices for wheat (7 days ahead)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:58:23.517662", "level": "INFO", "logger": "agri_ai", "message": "Attempting to fetch data from data.gov.in API (commodity=Wheat, limit=5000, offset=0)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:58:24.329890", "level": "WARNING", "logger": "agri_ai", "message": "\u26a0\ufe0f API returned empty data", "module": "logging_config", "function": "warning", "line": 119}
{"timestamp": "2025-12-09T04:58:24.339514", "level": "WARNING", "logger": "agri_ai", "message": "\u26a0\ufe0f Falling back to synthetic data", "module": "logging_config", "function": "warning", "line": 119}
{"timestamp": "2025-12-09T04:58:24.347380", "level": "INFO", "logger": "agri_ai", "message": "\ud83d\udcca Generating synthetic data for wheat (180 days)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:58:24.359822", "level": "INFO", "logger": "agri_ai", "message": "GET /api/prices/predict - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "fe1234cd-b805-4eb2-b1f3-b8e382ff6655", "endpoint": "/api/prices/predict"}
{"timestamp": "2025-12-09T04:58:24.372997", "level": "INFO", "logger": "agri_ai", "message": "Fetching weather from API for Delhi", "module": "logging_config", "function": "info", "line": 114, "endpoint": "weather"}
{"timestamp": "2025-12-09T04:58:25.025575", "level": "INFO", "logger": "agri_ai", "message": "Fetching weather from API for Delhi", "module": "logging_config", "function": "info", "line": 114, "endpoint": "weather"}
{"timestamp": "2025-12-09T04:58:25.687473", "level": "INFO", "logger": "agri_ai", "message": "Fetching weather from API for Delhi", "module": "logging_config", "function": "info", "line": 114, "endpoint": "weather"}
{"timestamp": "2025-12-09T04:58:26.302555", "level": "INFO", "logger": "agri_ai", "message": "Fetching weather from API for Delhi", "module": "logging_config", "function": "info", "line": 114, "endpoint": "weather"}
{"timestamp": "2025-12-09T04:58:26.921419", "level": "INFO", "logger": "agri_ai", "message": "Fetching weather from API for Delhi", "module": "logging_config", "function": "info", "line": 114, "endpoint": "weather"}
{"timestamp": "2025-12-09T04:58:27.578664", "level": "INFO", "logger": "agri_ai", "message": "GET /api/weather/current - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "3a719245-fdbf-428a-b727-bd33ef61f738", "endpoint": "/api/weather/current"}
{"timestamp": "2025-12-09T04:58:27.584830", "level": "INFO", "logger": "agri_ai", "message": "GET /api/weather/current - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "ee18a990-a17c-452d-bf8a-b69491fdaa13", "endpoint": "/api/weather/current"}
{"timestamp": "2025-12-09T04:58:27.585946", "level": "INFO", "logger": "agri_ai", "message": "GET /api/weather/current - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "0bac13fb-6137-44d4-84c8-8f1ad181dc7b", "endpoint": "/api/weather/current"}
{"timestamp": "2025-12-09T04:58:27.586500", "level": "INFO", "logger": "agri_ai", "message": "GET /api/weather/current - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "a3f1707a-4c73-43e0-9c46-bbc392402e1a", "endpoint": "/api/weather/current"}
{"timestamp": "2025-12-09T04:58:27.586908", "level": "INFO", "logger": "agri_ai", "message": "GET /api/weather/current - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "77d527ed-9aa8-42bf-b008-05d0ef45a082", "endpoint": "/api/weather/current"}
{"timestamp": "2025-12-09T04:58:27.620744", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "e0c30b0a-f998-43e7-bb39-a4a4e51a949e", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:58:27.649811", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "9bdb4a33-c1e0-4512-a764-ebcd031732ea", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:58:27.675666", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "92774a80-54bb-4c1d-bee8-73044705d2df", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:58:27.697620", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "2d6942a7-b258-4120-ba46-a514c8b1d94b", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:58:27.720801", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "4c757fcf-cdee-44d5-a348-d16c40e583c0", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:58:27.730534", "level": "INFO", "logger": "agri_ai", "message": "Fetching weather from API for Delhi", "module": "logging_config", "function": "info", "line": 114, "endpoint": "weather"}
{"timestamp": "2025-12-09T04:58:28.375061", "level": "INFO", "logger": "agri_ai", "message": "Fetching weather from API for Delhi", "module": "logging_config", "function": "info", "line": 114, "endpoint": "weather"}
{"timestamp": "2025-12-09T04:58:29.013936", "level": "INFO", "logger": "agri_ai", "message": "Fetching weather from API for Delhi", "module": "logging_config", "function": "info", "line": 114, "endpoint": "weather"}
{"timestamp": "2025-12-09T04:58:29.574911", "level": "INFO", "logger": "agri_ai", "message": "Fetching weather from API for Delhi", "module": "logging_config", "function": "info", "line": 114, "endpoint": "weather"}
{"timestamp": "2025-12-09T04:58:30.144159", "level": "INFO", "logger": "agri_ai", "message": "Fetching weather from API for Delhi", "module": "logging_config", "function": "info", "line": 114, "endpoint": "weather"}
{"timestamp": "2025-12-09T04:58:30.771376", "level": "INFO", "logger": "agri_ai", "message": "GET /api/weather/current - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "5c3fe4ae-35c1-4455-b471-18822ccb9d11", "endpoint": "/api/weather/current"}
{"timestamp": "2025-12-09T04:58:30.771840", "level": "INFO", "logger": "agri_ai", "message": "GET /api/weather/current - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "4e24243a-0e79-4bc8-895b-2a7605f8996b", "endpoint": "/api/weather/current"}
{"timestamp": "2025-12-09T04:58:30.772540", "level": "INFO", "logger": "agri_ai", "message": "GET /api/weather/current - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "6640db16-c45a-4196-9de3-1e694fe78a18", "endpoint": "/api/weather/current"}
{"timestamp": "2025-12-09T04:58:30.773640", "level": "INFO", "logger": "agri_ai", "message": "GET /api/weather/current - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "7f0d4c65-c9a2-49b8-91bc-7a287eed89f9", "endpoint": "/api/weather/current"}
{"timestamp": "2025-12-09T04:58:30.774034", "level": "INFO", "logger": "agri_ai", "message": "GET /api/weather/current - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "02b28582-bf85-4eec-a7cf-04fce4af33b1", "endpoint": "/api/weather/current"}
{"timestamp": "2025-12-09T04:58:30.952118", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "2e293af6-7854-4ca7-9dcb-bf650ae5d99d", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:58:30.976576", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "f9aea239-d990-4c4a-abe1-79f062c43aba", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:58:30.997733", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "905dbf41-3d52-43d6-a0f4-2a1470ab165f", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:58:31.019213", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "13d1db90-1937-4426-a1f0-2eb212c8b722", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:58:31.044687", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "a0ed9cfe-7f79-4c1b-8936-8449ae496a66", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:58:31.075763", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "660274f6-bf17-46ce-a7f9-5ca5ba3b4001", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:58:31.096508", "level": "INFO", "logger": "agri_ai", "message": "GET /api/agent/history - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "b9691e60-87d0-4f3c-8ab4-7165e377a90d", "endpoint": "/api/agent/history"}
{"timestamp": "2025-12-09T04:58:31.121902", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "3eb4e785-84ea-4607-83cb-91c01d20fdbf", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:58:31.130795", "level": "INFO", "logger": "agri_ai", "message": "Predicting prices for wheat (7 days ahead)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:58:31.221922", "level": "INFO", "logger": "agri_ai", "message": "Attempting to fetch data from data.gov.in API (commodity=Wheat, limit=5000, offset=0)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:58:32.015077", "level": "WARNING", "logger": "agri_ai", "message": "\u26a0\ufe0f API returned empty data", "module": "logging_config", "function": "warning", "line": 119}
{"timestamp": "2025-12-09T04:58:32.024084", "level": "WARNING", "logger": "agri_ai", "message": "\u26a0\ufe0f Falling back to synthetic data", "module": "logging_config", "function": "warning", "line": 119}
{"timestamp": "2025-12-09T04:58:32.031598", "level": "INFO", "logger": "agri_ai", "message": "\ud83d\udcca Generating synthetic data for wheat (180 days)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:58:32.042975", "level": "INFO", "logger": "agri_ai", "message": "GET /api/prices/predict - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "0e9f04f7-0fa8-4ee0-ae46-e3f1c1efa7c3", "endpoint": "/api/prices/predict"}
{"timestamp": "2025-12-09T04:58:55.270037", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "ccbd5117-1bfe-4777-841b-1862a4e3644c", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:58:57.113984", "level": "INFO", "logger": "agri_ai", "message": "Fetching weather from API for Delhi", "module": "logging_config", "function": "info", "line": 114, "endpoint": "weather"}
{"timestamp": "2025-12-09T04:58:57.734033", "level": "INFO", "logger": "agri_ai", "message": "GET /api/weather/current - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "c353066e-75cc-4cf8-881e-a1543778f232", "endpoint": "/api/weather/current"}
{"timestamp": "2025-12-09T04:58:57.769357", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "7f4aaf5d-31a1-4bcd-8ae3-36f3fffbcc21", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:58:57.807703", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "a0aa6357-2943-44e3-aec9-0a27604575e4", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:58:57.845722", "level": "INFO", "logger": "agri_ai", "message": "GET /api/agent/history - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "8932008c-f6f0-419b-afc8-b35295f76356", "endpoint": "/api/agent/history"}
{"timestamp": "2025-12-09T04:58:57.855790", "level": "INFO", "logger": "agri_ai", "message": "Predicting prices for wheat (7 days ahead)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:58:57.929662", "level": "INFO", "logger": "agri_ai", "message": "Attempting to fetch data from data.gov.in API (commodity=Wheat, limit=5000, offset=0)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:58:58.671685", "level": "WARNING", "logger": "agri_ai", "message": "\u26a0\ufe0f API returned empty data", "module": "logging_config", "function": "warning", "line": 119}
{"timestamp": "2025-12-09T04:58:58.681271", "level": "WARNING", "logger": "agri_ai", "message": "\u26a0\ufe0f Falling back to synthetic data", "module": "logging_config", "function": "warning", "line": 119}
{"timestamp": "2025-12-09T04:58:58.689027", "level": "INFO", "logger": "agri_ai", "message": "\ud83d\udcca Generating synthetic data for wheat (180 days)", "module": "logging_config", "function": "info", "line": 114}
{"timestamp": "2025-12-09T04:58:58.695657", "level": "INFO", "logger": "agri_ai", "message": "GET /api/prices/predict - 200", "module": "logging_config", "function": "info", "line": 114, "request_id": "45bdf915-8da8-4126-b1de-9969e1fc2c0a", "endpoint": "/api/prices/predict"}
{"timestamp": "2025-12-09T04:59:01.128428", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "642ab62b-8b8a-4753-b7a2-e635bc38bd57", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:59:28.118535", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "550ff8b7-e9a1-4762-9651-36c80e72f826", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:59:31.110362", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "2aa762ec-20a3-40c1-a382-dfa4d3acc43d", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T04:59:58.145746", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "5ee06052-9115-4361-af86-679dd460bf50", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T05:00:11.154530", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "6096ba10-e983-44db-86c5-cefe1bd06622", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T05:00:27.474459", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "b6306b0c-c6bf-4097-9f47-c791119e953a", "endpoint": "/api/notifications/unread-count"}
{"timestamp": "2025-12-09T05:01:11.155150", "level": "ERROR", "logger": "agri_ai", "message": "Unhandled exception: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "module": "logging_config", "function": "error", "line": 124, "exception": {"type": "ProgrammingError", "message": "(psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": ["Traceback (most recent call last):\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "psycopg2.errors.UndefinedColumn: column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"C:\\agri-ai-platform\\backend\\app\\core\\error_tracking.py\", line 24, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 380, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 651, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\dependencies\\utils.py\", line 673, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"C:\\agri-ai-platform\\backend\\app\\api\\v1\\endpoints\\auth.py\", line 82, in get_current_user\n    user = db.query(User).filter(User.id == user_id).first()\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2249, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"C:\\Users\\91807\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n", "sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column users.is_superuser does not exist\nLINE 1: ...s_active, users.is_verified AS users_is_verified, users.is_s...\n                                                             ^\n\n[SQL: SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.phone AS users_phone, users.location AS users_location, users.favorite_crops AS users_favorite_crops, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(id_1)s \n LIMIT %(param_1)s]\n[parameters: {'id_1': 1, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"]}, "request_id": "aeb0458a-e21f-4865-8043-7031a0559f11", "endpoint": "/api/notifications/unread-count"}
